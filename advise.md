üìÑ advise.md
‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º–∏, –∑ —è–∫–∏–º–∏ –º–∏ –∑—ñ—Ç–∫–Ω—É–ª–∏—Å—è –ø—Ä–∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—ó Facebook (–ª–∞–π–∫–∏ + –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ)
‚úÖ 1. –ü–æ–≤—ñ–ª—å–Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Å—Ç–æ—Ä—ñ–Ω–∫–∏ —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å—ñ AdsPower

–°–∏–º–ø—Ç–æ–º–∏:

DOM —á–∞—Å—Ç–∫–æ–≤–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–∏–π

–µ–ª–µ–º–µ–Ω—Ç–∏ –Ω–µ –∑–Ω–∞—Ö–æ–¥—è—Ç—å—Å—è –∞–±–æ —Å—Ç–∞—é—Ç—å stale

—Å–∫—Ä–∏–ø—Ç –≤–≤–∞–∂–∞–≤, —â–æ –ª–∞–π–∫ –≤–∂–µ —Å—Ç–æ—ó—Ç—å (—Ö–æ—á–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞ —â–µ –Ω–µ –ø—Ä–æ–≥—Ä—É–∑–∏–ª–∞—Å—å)

–†—ñ—à–µ–Ω–Ω—è:

–≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ DOM stabilization ‚Äì —á–µ–∫–∞—Ç–∏ –ø–æ–∫–∏ HTML –ø–µ—Ä–µ—Å—Ç–∞–Ω–µ –∑–º—ñ–Ω—é–≤–∞—Ç–∏—Å—å (page_source).

—É–Ω–∏–∫–∞—Ç–∏ driver.get() ‚Üí –∑–∞–º—ñ—Å—Ç—å —Ü—å–æ–≥–æ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç–∏ —á–µ—Ä–µ–∑
driver.execute_script("window.location.href = ...")

–¥–æ–¥–∞—Ç–∏ –Ω–µ–≤–µ–ª–∏–∫—ñ —Ä–∞–Ω–¥–æ–º–Ω—ñ –ø–∞—É–∑–∏

üëç 2. –ö–Ω–æ–ø–∫–∞ Like –±—É–ª–∞ –Ω–µ–≤–∏–¥–∏–º–∞ –∞–±–æ –ø–µ—Ä–µ–∫—Ä–∏—Ç–∞ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º

–°–∏–º–ø—Ç–æ–º–∏:

ElementClickInterceptedException

JS-–∫–ª—ñ–∫ –Ω–µ —Å–ø—Ä–∞—Ü—å–æ–≤—É–≤–∞–≤

–ª–∞–π–∫ –Ω–µ —Å—Ç–∞–≤–∏–≤—Å—è, —Ö–æ—á–∞ –ª–æ–≥ –∫–∞–∑–∞–≤ ‚Äú–ü–æ—Å—Ç–∞–≤–ª–µ–Ω–æ‚Äù

–ü—Ä–∏—á–∏–Ω–∏:

–∫–Ω–æ–ø–∫–∞ Like —Ñ—ñ–∑–∏—á–Ω–æ –Ω–∏–∂—á–µ viewport

FB –ø—ñ–¥–≤–∞–Ω—Ç–∞–∂—É—î –±–ª–æ–∫–∏ –ø—Ä–∏ —Å–∫—Ä–æ–ª—ñ

React –ø–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä—é—î –∫–æ–º–ø–æ–Ω–µ–Ω—Ç

–†—ñ—à–µ–Ω–Ω—è:

–º—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π —Å–∫—Ä–æ–ª –≤–Ω–∏–∑ (‚âà400‚Äì600px) –ª–∏—à–µ –æ–¥–∏–Ω —Ä–∞–∑ –ø–µ—Ä–µ–¥ –ø–æ—à—É–∫–æ–º –∫–Ω–æ–ø–∫–∏

fallback: —è–∫—â–æ –Ω–µ –≤–¥–∞–ª–æ—Å—å –∫–ª—ñ–∫–Ω—É—Ç–∏ ‚Üí JS click

–ø–æ–≤—Ç–æ—Ä–Ω–µ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –ª–∞–π–∫—É –ø—ñ—Å–ª—è –∫–ª—ñ–∫—É (–ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Å—Ç–∞–Ω)

üí¨ 3. –ü–æ–ª–µ –¥–ª—è –∫–æ–º–µ–Ω—Ç–∞—Ä—è ‚Äú—Å—Ç–∏–≥–∞–ª–æ‚Äù —Ç–∞ –∑–Ω–∏–∫–∞–ª–æ –ø—ñ–¥ —á–∞—Å –Ω–∞–±–æ—Ä—É

–°–∏–º–ø—Ç–æ–º–∏:

–∫—É—Ä—Å–æ—Ä –∑–Ω–∏–∫–∞–≤ –ø—Ä–∏ –¥—Ä—É—Ü—ñ

—Å–∏–º–≤–æ–ª–∏ –Ω–µ –≤–≤–æ–¥–∏–ª–∏—Å—è –∞–±–æ –≤–≤–æ–¥–∏–ª–∏—Å—è –Ω–µ —Ç—É–¥–∏

StaleElementReferenceException

–ø—ñ—Å–ª—è –∫–ª—ñ–∫—É React –ø–µ—Ä–µ–≤—ñ–¥–º–∞–ª—å–æ–≤—É–≤–∞–≤ contenteditable ‚Üí —Ñ–æ–∫—É—Å –ø—Ä–æ–ø–∞–¥–∞–≤

–ü—Ä–∏—á–∏–Ω–∞:

Facebook –ù–ï –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É <textarea>
–í—ñ–Ω –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î React div[contenteditable="true"], —è–∫–∏–π –ø–µ—Ä–µ—Å–æ–∑–¥–∞—î—Ç—å—Å—è –ø—ñ–¥ —á–∞—Å –≤–∑–∞—î–º–æ–¥—ñ—ó.

–†—ñ—à–µ–Ω–Ω—è:

–Ω–µ —Å–∫—Ä–æ–ª–∏—Ç–∏ –ø–µ—Ä–µ–¥ –≤–∑–∞—î–º–æ–¥—ñ—î—é (—â–æ–± –Ω–µ —Ç—Ä–∏–≥–µ—Ä–∏—Ç–∏ –¥–æ–≥—Ä—É–∑–∫—É –µ–ª–µ–º–µ–Ω—Ç—ñ–≤)

–∫–ª—ñ–∫–∞—Ç–∏ –≤ –ø–æ–ª–µ –¥–≤—ñ—á—ñ –∑ –ø–∞—É–∑–æ—é

–ø–µ—Ä–µ–¥ –Ω–∞–±–æ—Ä–æ–º —ñ –ø—ñ–¥ —á–∞—Å –Ω–∞–±–æ—Ä—É –ø–µ—Ä—ñ–æ–¥–∏—á–Ω–æ –ø–æ–≤—Ç–æ—Ä–Ω–æ —Ñ–æ–∫—É—Å—É–≤–∞—Ç–∏ contenteditable

–¥—Ä—É–∫ —á–µ—Ä–µ–∑ Chrome DevTools Protocol (Input.insertText) –∑–∞–º—ñ—Å—Ç—å send_keys

—Å—Ç–∞–±—ñ–ª—å–Ω–æ –ø—Ä–∞—Ü—é—î –Ω–∞–≤—ñ—Ç—å –ø—ñ—Å–ª—è –ø–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä—É

–≤–∏–≥–ª—è–¥–∞—î —è–∫ —Å–ø—Ä–∞–≤–∂–Ω—ñ–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—Ü—å–∫–∏–π –≤–≤—ñ–¥

—á–µ–∫–∞—Ç–∏ DOM stabilization –ø–µ—Ä–µ–¥ –≤–∑–∞—î–º–æ–¥—ñ—î—é

üë§ 4. –í—Ç—Ä–∞—Ç–∞ —Ñ–æ–∫—É—Å—É –ø—Ä–∏ –¥—Ä—É—Ü—ñ –∫–æ–º–µ–Ω—Ç–∞—Ä—è

–ü—Ä–∏—á–∏–Ω–∞:

Selenium send_keys –≥–µ–Ω–µ—Ä—É—î key events, —è–∫—ñ FB —ñ–Ω–æ–¥—ñ –æ–±—Ä–æ–±–ª—è—î —è–∫ ‚Äú–Ω–µ–Ω–∞—Ç—É—Ä–∞–ª—å–Ω—ñ‚Äù, —â–æ –ø—Ä–∏–∑–≤–æ–¥–∏—Ç—å –¥–æ blur —Ç–∞ —Ä–µ-—Ä–µ–Ω–¥–µ—Ä–∞ –ø–æ–ª—è.

–†—ñ—à–µ–Ω–Ω—è:

–≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ Input.insertText —á–µ—Ä–µ–∑ CDP

–ø–µ—Ä—ñ–æ–¥–∏—á–Ω–æ —É—Ç–æ—á–Ω—é–≤–∞—Ç–∏ —Ñ–æ–∫—É—Å —ñ –∫–∞—Ä–µ—Ç–∫—É –ø–µ—Ä–µ–¥ –≤—Å—Ç–∞–≤–ª–µ–Ω–Ω—è–º —Å–∏–º–≤–æ–ª—ñ–≤

–Ω–µ–≤–µ–ª–∏–∫—ñ —Ä–∞–Ω–¥–æ–º–Ω—ñ –∑–∞—Ç—Ä–∏–º–∫–∏ –º—ñ–∂ —Å–∏–º–≤–æ–ª–∞–º–∏ (—ñ–º—ñ—Ç–∞—Ü—ñ—è –ª—é–¥–∏–Ω–∏)

üß† 5. FB –∞–Ω—Ç–∏-–±–æ—Ç –º–µ—Ö–∞–Ω—ñ–∫–∏

FB –º–æ–Ω—ñ—Ç–æ—Ä–∏—Ç—å:

—Ä—ñ–∑–∫—ñ –∫–ª—ñ–∫–∏ –±–µ–∑ –ø—Ä–æ–∫—Ä—É—Ç–∫–∏

–¥—É–∂–µ —à–≤–∏–¥–∫–∏–π –Ω–∞–±—ñ—Ä —Ç–µ–∫—Å—Ç—É

–æ–¥–Ω–æ—Ç–∏–ø–Ω—ñ –ø–∞—Ç–µ—Ä–Ω–∏ –ø–æ–≤–µ–¥—ñ–Ω–∫–∏

–ú–µ—Ç–æ–¥–∏ —É–Ω–∏–∫–Ω–µ–Ω–Ω—è:

–¥–æ–¥–∞–Ω–æ human_behavior() (—ñ–º—ñ—Ç–∞—Ü—ñ—è —Å–∫—Ä–æ–ª—É/–º–∏—à–∫–∏/–ø–∞—É–∑–∞)

—Ä–∞–Ω–¥–æ–º–Ω—ñ –∑–∞—Ç—Ä–∏–º–∫–∏ –ø—Ä–∏ –≤–≤–æ–¥—ñ —Ç–µ–∫—Å—Ç—É

–ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∞–Ω—ñ–≤ –ø–µ—Ä–µ–¥ –¥—ñ—î—é

üèÅ –ü—ñ–¥—Å—É–º–∫–∏
–ü—Ä–æ–±–ª–µ–º–∞	–ü—Ä–∏—á–∏–Ω–∞	–†—ñ—à–µ–Ω–Ω—è
–õ–∞–π–∫ –Ω–µ —Å—Ç–∞–≤–∏–≤—Å—è / –ø—Ä–æ–ø—É—Å–∫–∞–≤—Å—è	DOM –Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–∏–π / –∫–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ–∫—Ä–∏—Ç–∞	DOM —Å—Ç–∞–±—ñ–ª—ñ–∑–∞—Ü—ñ—è, —Å–∫—Ä–æ–ª 1 —Ä–∞–∑, JS fallback
–ö—É—Ä—Å–æ—Ä –∑–Ω–∏–∫–∞–≤ –ø—ñ–¥ —á–∞—Å –¥—Ä—É–∫—É	React –ø–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä—é—î –ø–æ–ª–µ	CDP InsertText + —Ä–µ—Ñ–æ–∫—É—Å
StaleElementException	–µ–ª–µ–º–µ–Ω—Ç –æ–Ω–æ–≤–∏–≤—Å—è –ø—ñ—Å–ª—è –≤–∑–∞—î–º–æ–¥—ñ—ó	–ø–æ–≤—Ç–æ—Ä–Ω–∏–π –ø–æ—à—É–∫ + —Ä–µ—Ñ–æ–∫—É—Å
FB —Ñ—ñ–∫—Å—É—î –±–æ—Ç–∞	–Ω–∞–¥—Ç–æ ‚Äú—ñ–¥–µ–∞–ª—å–Ω–∞‚Äù —à–≤–∏–¥–∫—ñ—Å—Ç—å	—Ä–∞–Ω–¥–æ–º–Ω—ñ –∑–∞—Ç—Ä–∏–º–∫–∏, human-behavior

üßæ –ó–≤—ñ—Ç: –ø—Ä–æ–±–ª–µ–º–∏ –ø—Ä–∏ –≤—ñ–¥–∫—Ä–∏—Ç—Ç—ñ –≤–∫–ª–∞–¥–æ–∫ —É AdsPower —á–µ—Ä–µ–∑ Selenium —Ç–∞ —Å–ø–æ—Å–æ–±–∏ —ó—Ö –≤–∏—Ä—ñ—à–µ–Ω–Ω—è
üî• –ó —è–∫–∏–º–∏ –ø—Ä–æ–±–ª–µ–º–∞–º–∏ –º–∏ —Å—Ç–∏–∫–Ω—É–ª–∏—Å—è
–ü—Ä–æ–±–ª–µ–º–∞	–°–∏–º–ø—Ç–æ–º–∏	–ü—Ä–∏—á–∏–Ω–∞
Selenium –Ω–µ –±–∞—á–∏–≤ –Ω–æ–≤–∏—Ö –≤–∫–ª–∞–¥–æ–∫ –ø—ñ—Å–ª—è window.open()	driver.window_handles –Ω–µ –∑–º—ñ–Ω—é—î—Ç—å—Å—è, –≤–∫–ª–∞–¥–∫–∞ –Ω–µ –∑‚Äô—è–≤–ª—è—î—Ç—å—Å—è	–ë–ª–æ–∫—É–≤–∞–Ω–Ω—è —Å–ø–ª–∏–≤–∞—é—á–∏—Ö –≤—ñ–∫–æ–Ω (popup blocker), Facebook + Chromium –ø–æ–ª—ñ—Ç–∏–∫–∏ –±–µ–∑–ø–µ–∫–∏
–í–∫–ª–∞–¥–∫–∞ —Å—Ç–≤–æ—Ä—é–≤–∞–ª–∞—Å—å, –∞–ª–µ –Ω–µ –±—É–ª–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ –¥–ª—è Selenium	–í–∫–ª–∞–¥–∫–∞ –≤—ñ–¥–∫—Ä–∏–≤–∞–ª–∞—Å—å ‚Äú–≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –±—Ä–∞—É–∑–µ—Ä–∞‚Äù, –∞–ª–µ –±–µ–∑ –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä–∞	AdsPower –Ω–µ –∑–∞–≤–∂–¥–∏ —Å—Ç–≤–æ—Ä—é—î Selenium-managed —Ç–∞–± –ø—Ä–∏ –≤—ñ–¥–∫—Ä–∏—Ç—Ç—ñ —á–µ—Ä–µ–∑ JS
Ctrl+T (—ñ–º—ñ—Ç–æ–≤–∞–Ω–µ) –Ω–µ —Å—Ç–≤–æ—Ä—é–≤–∞–ª–æ –≤–∫–ª–∞–¥–∫—É	Selenium –Ω–µ –æ—Ç—Ä–∏–º—É–≤–∞–≤ –Ω–æ–≤–∏–π handle	Windows-–≥–∞—Ä—è—á—ñ –∫–ª–∞–≤—ñ—à—ñ –±–ª–æ–∫—É—é—Ç—å—Å—è, –≤—ñ–¥—Å—É—Ç–Ω—ñ–π —Ñ–æ–∫—É—Å –∞–±–æ Chrome –Ω–µ –ø—Ä–∏–π–º–∞—î —ñ–Ω–ø—É—Ç —á–µ—Ä–µ–∑ remote debugger
–ù–∞–≤—ñ—Ç—å –ø—ñ—Å–ª—è –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è —Å—Ç–æ—Ä—ñ–Ω–∫–∏ readyState == 'complete' –Ω–µ –æ–∑–Ω–∞—á–∞–≤, —â–æ –≤–æ–Ω–∞ —Ä–µ–∞–ª—å–Ω–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–∞	–ö–æ–Ω—Ç–µ–Ω—Ç FB –¥–æ–≥—Ä—É–∂–∞–≤—Å—è, DOM –∑–º—ñ–Ω—é–≤–∞–≤—Å—è –ø—ñ—Å–ª—è complete	Facebook ‚Äì SPA, React —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å —Ç–∞ lazy-load –µ–ª–µ–º–µ–Ω—Ç–∏ –ø—ñ—Å–ª—è base-load
–ë—Ä–∞—É–∑–µ—Ä ¬´–∑–∞–≤–∏—Å–∞–≤¬ª —É —Å—Ç–∞–Ω—ñ —á–∞—Å—Ç–∫–æ–≤–æ–≥–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –±–µ–∑ –ø–æ–º–∏–ª–∫–∏	–°–∫—Ä–∏–ø—Ç–∏, —Ä–µ–∫–ª–∞–º–∞, –≥—Ä–∞—Ñ—ñ–∫–∞, FB-—Å–µ—Ä–≤—ñ—Å–∏	–ü–æ—Ç—Ä—ñ–±–µ–Ω –¥–æ–¥–∞—Ç–∫–æ–≤–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å —Å—Ç–∞–±—ñ–ª—ñ–∑–∞—Ü—ñ—ó DOM —ñ —Ä–µ—Å—É—Ä—Å—ñ–≤
‚úÖ –Ø–∫ –º–∏ –≤–∏—Ä—ñ—à–∏–ª–∏ –∫–æ–∂–Ω—É –ø—Ä–æ–±–ª–µ–º—É
–ü—Ä–æ–±–ª–µ–º–∞	–†—ñ—à–µ–Ω–Ω—è
–ü–æ–ø–∞–ø-–±–ª–æ–∫–µ—Ä –±–ª–æ–∫—É—î window.open()	–ù–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ window.open –∞–±–æ hotkeys. –í—ñ–¥–∫—Ä–∏–≤–∞—Ç–∏ –≤–∫–ª–∞–¥–∫–∏ —á–µ—Ä–µ–∑ CDP: Target.createTarget()
Selenium –Ω–µ –±–∞—á–∏—Ç—å –≤–∫–ª–∞–¥–∫—É	–ü—ñ—Å–ª—è createTarget() —á–µ–∫–∞—Ç–∏ –ø–æ—è–≤—É –Ω–æ–≤–æ–≥–æ window_handle –≤ —Ü–∏–∫–ª—ñ –∑ —Ç–∞–π–º–∞—É—Ç–æ–º
–í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å —Ñ–æ–∫—É—Å–∞ –¥–ª—è Ctrl+T	–í—ñ–¥–º–æ–≤–∏—Ç–∏—Å—è –≤—ñ–¥ Ctrl+T –Ω–∞ –∫–æ—Ä–∏—Å—Ç—å CDP (–ø—Ä–∞—Ü—é—î –±–µ–∑ —Ñ–æ–∫—É—Å—É —ñ –Ω–µ–∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ UI)
readyState == 'complete' –Ω–µ –æ–∑–Ω–∞—á–∞—î –≥–æ—Ç–æ–≤–Ω—ñ—Å—Ç—å FB	–î–æ–¥–∞–Ω–æ DOM-—Å—Ç–∞–±—ñ–ª—ñ–∑–∞—Ü—ñ—é + —Å—Ç–∞–±—ñ–ª—ñ–∑–∞—Ü—ñ—é –º–µ—Ä–µ–∂–µ–≤–∏—Ö —Ä–µ—Å—É—Ä—Å—ñ–≤ (–ø–µ—Ä–µ–≤—ñ—Ä–∫–∞, —â–æ DOM –ø–µ—Ä–µ—Å—Ç–∞–≤ –∑–º—ñ–Ω—é–≤–∞—Ç–∏—Å—å ‚â• X —Å–µ–∫)
–ö–æ–Ω—Ç–µ–Ω—Ç FB –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î—Ç—å—Å—è –ø–æ–∑–∞ –æ—Å–Ω–æ–≤–Ω–∏–º –ø–æ—Ç–æ–∫–æ–º	–î–æ–¥–∞–Ω–æ –æ–ø—Ü—ñ–π–Ω–µ –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è ‚Äú–æ–ø–æ—Ä–Ω–æ–≥–æ —Å–µ–ª–µ–∫—Ç–æ—Ä–∞‚Äù, —è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –≥–∞—Ä–∞–Ω—Ç—É–≤–∞—Ç–∏, —â–æ –∑ º—è–≤–∏–≤—Å—è –∫–ª—é—á–æ–≤–∏–π –µ–ª–µ–º–µ–Ω—Ç —Å—Ç–æ—Ä—ñ–Ω–∫–∏
üìå –ö–æ—Ä–æ—Ç–∫–∞ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –¥–ª—è —Ä–æ–∑—Ä–æ–±–Ω–∏–∫—ñ–≤
–Ø–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤—ñ–¥–∫—Ä–∏–≤–∞—Ç–∏ –Ω–æ–≤—ñ –≤–∫–ª–∞–¥–∫–∏ –≤ AdsPower + Selenium

–ù—ñ–∫–æ–ª–∏ –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ window.open() –∞–±–æ Ctrl+T.
–í–æ–Ω–∏ –±–ª–æ–∫—É—é—Ç—å—Å—è —Ç–∞/–∞–±–æ –Ω–µ –¥–∞—é—Ç—å Selenium –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä—É –≤–∫–ª–∞–¥–∫–∏.

–í—ñ–¥–∫—Ä–∏–≤–∞–π—Ç–µ –≤–∫–ª–∞–¥–∫–∏ —Ç—ñ–ª—å–∫–∏ —á–µ—Ä–µ–∑ Chrome DevTools Protocol (CDP):

Target.createTarget(url="about:blank")

Target.activateTarget

–ü—ñ—Å–ª—è –ø–æ—è–≤–∏ window_handle ‚Üí driver.switch_to.window()

–õ–∏—à–µ –ø–æ—Ç—ñ–º driver.get(url)

–ó–∞–≤–∂–¥–∏ –ø–µ—Ä–µ–≤—ñ—Ä—è–π—Ç–µ –ø–æ–≤–Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Å—Ç–æ—Ä—ñ–Ω–∫–∏ –∑–∞ 3 –∫—Ä–∏—Ç–µ—Ä—ñ—è–º–∏:
‚úî document.readyState == 'complete'
‚úî DOM —Å—Ç–∞–±—ñ–ª—å–Ω–∏–π (–∫—ñ–ª—å–∫—ñ—Å—Ç—å –Ω–æ–¥ —Ç–∞ innerHTML.length –Ω–µ –∑–º—ñ–Ω—é—é—Ç—å—Å—è ‚â• 1.8 —Å–µ–∫)
‚úî (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ) –æ–ø–æ—Ä–Ω–∏–π –µ–ª–µ–º–µ–Ω—Ç –ø—Ä–∏—Å—É—Ç–Ω—ñ–π

–Ø–∫—â–æ Selenium –Ω–µ –±–∞—á–∏—Ç—å –≤–∫–ª–∞–¥–∫—É ‚Äî –≤–≤–∞–∂–∞–π—Ç–µ –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è –Ω–µ–≤–¥–∞–ª–∏–º —ñ –Ω–µ –ø—Ä–æ–¥–æ–≤–∂—É–π—Ç–µ —Ä–æ–±–æ—Ç—É
–¶–µ –∑–∞—Ö–∏—Å—Ç –≤—ñ–¥ ‚Äú–∑–∞–≤–∏—Å–ª–∏—Ö‚Äù —Å–µ—Å—ñ–π.

–¢–µ—Å—Ç—É–π—Ç–µ –∑ –¥–æ—Å—Ç–∞—Ç–Ω—ñ–º–∏ timeout‚Äô–∞–º–∏ ‚Äì Facebook –≤–∞–∂–∫–∏–π, —ñ–Ω–æ–¥—ñ 25‚Äì40 —Å–µ–∫ —î –Ω–æ—Ä–º–æ—é.

üß† –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó –º–∞–π–±—É—Ç–Ω—ñ–º —Ä–æ–∑—Ä–æ–±–Ω–∏–∫–∞–º

–í—Ä–∞—Ö–æ–≤—É–π—Ç–µ, —â–æ Facebook ‚Äî —Ü–µ SPA, —Ç–æ–º—É –Ω–µ –ø–æ–∫–ª–∞–¥–∞–π—Ç–µ—Å—è –ª–∏—à–µ –Ω–∞ readyState.

DOM-—Å—Ç–∞–±—ñ–ª—ñ–∑–∞—Ü—ñ—è ‚Äì –Ω–∞–π–∫—Ä–∞—â–∏–π —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä —Ñ–∞–∫—Ç–∏—á–Ω–æ—ó –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—ñ –∫–æ–Ω—Ç–µ–Ω—Ç—É.

–Ø–∫—â–æ –ø–æ—Ç—Ä—ñ–±–µ–Ω 100% –≥–∞—Ä–∞–Ω—Ç–æ–≤–∞–Ω–∏–π —Å–∏–≥–Ω–∞–ª –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏ ‚Äî –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –∫–æ–º–±—ñ–Ω–æ–≤–∞–Ω—É –ø–µ—Ä–µ–≤—ñ—Ä–∫—É (readyState + DOM stability + key selector).

–î–ª—è –º–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è: –¥–æ–¥–∞–π—Ç–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è —á–∞—Å—É, —Å–∫—ñ–ª—å–∫–∏ –∑–∞–π–Ω—è–ª–æ –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è ‚Üí –∫–æ—Ä–∏—Å–Ω–æ –¥–ª—è –ø–æ–¥–∞–ª—å—à–æ—ó –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó.

–ó–≤—ñ—Ç –ø—Ä–æ –ø—Ä–æ–±–ª–µ–º—É –∑ –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—è–º –∫–Ω–æ–ø–∫–∏ —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ–≤ —É Facebook —Ç–∞ —ó—ó –≤–∏—Ä—ñ—à–µ–Ω–Ω—è
–ü—Ä–æ–±–ª–µ–º–∞: –ö–Ω–æ–ø–∫–∞ —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ–≤ (‚ÄúMost relevant / Most recent / All comments‚Äù) —É Facebook –±—É–ª–∞ –≤–∞–∂–∫–æ–¥–æ—Å—Ç—É–ø–Ω–æ—é –¥–ª—è Selenium: –Ω–µ –∑–∞–≤–∂–¥–∏ –≤—ñ–¥–æ–±—Ä–∞–∂–∞–ª–∞—Å—å —É DOM, –º–æ–≥–ª–∞ –±—É—Ç–∏ –ø–æ–∑–∞ –≤–∏–¥–∏–º–æ—é —á–∞—Å—Ç–∏–Ω–æ—é –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, –∞–±–æ –ø–µ—Ä–µ–∫—Ä–∏–≤–∞–ª–∞—Å—å –ø–æ–ø-–∞–ø–∞–º–∏ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–Ω—ñ –Ω–∞ –∞–≤–∞—Ç–∞—Ä–∏ —á–∏ —ñ–º–µ–Ω–∞ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤.

–ü—Ä–∏—á–∏–Ω–∞: Facebook –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –ø—ñ–¥–≤–∞–Ω—Ç–∞–∂—É—î —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ–≤, —ñ –µ–ª–µ–º–µ–Ω—Ç —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è:

–º–æ–∂–µ –Ω–µ —ñ—Å–Ω—É–≤–∞—Ç–∏ –æ–¥—Ä–∞–∑—É –ø—ñ—Å–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Å—Ç–æ—Ä—ñ–Ω–∫–∏;

—ñ–Ω–∫–æ–ª–∏ –Ω–µ –º—ñ—Å—Ç–∏—Ç—å —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –ª–µ–π–±–ª–∞, —Ç–æ–º—É XPath –ø–æ —Ç–µ–∫—Å—Ç—É –Ω–µ —Å–ø—Ä–∞—Ü—å–æ–≤—É—î;

—á–∞—Å—Ç–æ –º–∞—î aria-–∞—Ç—Ä–∏–±—É—Ç–∏ –∑–∞–º—ñ—Å—Ç—å –≤–∏–¥–∏–º–æ–≥–æ —Ç–µ–∫—Å—Ç—É;

–º–æ–∂–µ –±—É—Ç–∏ –ø–µ—Ä–µ–∫—Ä–∏—Ç–∏–π —Å–ø–ª–∏–≤–∞—é—á–∏–º–∏ –ø—ñ–¥–∫–∞–∑–∫–∞–º–∏.

–©–æ —Å–ø—Ä–∞—Ü—é–≤–∞–ª–æ: –ù–∞–π–µ—Ñ–µ–∫—Ç–∏–≤–Ω—ñ—à–∏–º –≤–∏—è–≤–∏–≤—Å—è –ø—ñ–¥—Ö—ñ–¥ –ø–æ—à—É–∫—É —á–µ—Ä–µ–∑ aria-–∞—Ç—Ä–∏–±—É—Ç–∏ –∫–Ω–æ–ø–∫–∏ –º–µ–Ω—é ‚Äî –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ –ø–æ—à—É–∫ –µ–ª–µ–º–µ–Ω—Ç–∞ –∑ role="button" —ñ aria-haspopup="menu" –∞–±–æ aria-expanded. –°–∞–º–µ —Ü–µ–π –º–µ—Ç–æ–¥ —Å—Ç–∞–±—ñ–ª—å–Ω–æ –∑–Ω–∞—Ö–æ–¥–∏—Ç—å –∫–Ω–æ–ø–∫—É —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è, –Ω–∞–≤—ñ—Ç—å —è–∫—â–æ –≤—ñ–¥—Å—É—Ç–Ω—ñ–π —Ç–µ–∫—Å—Ç –∞–±–æ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å —É —ñ–Ω—à—ñ–π –º–æ–≤—ñ. –ü—ñ—Å–ª—è –∑–Ω–∞—Ö–æ–¥–∂–µ–Ω–Ω—è –µ–ª–µ–º–µ–Ω—Ç –±—É–≤ –ø—Ä–æ–∫—Ä—É—á–µ–Ω–∏–π —É –≤–∏–¥–∏–º—É –æ–±–ª–∞—Å—Ç—å, –≤–∏–∫–æ–Ω–∞–Ω–æ —Ö–æ–≤–µ—Ä –¥–ª—è —É—Å—É–Ω–µ–Ω–Ω—è –ø–µ—Ä–µ–∫—Ä–∏—Ç—Ç—è, –ø—ñ—Å–ª—è —á–æ–≥–æ Selenium-–∫–ª—ñ–∫ —Å–ø—Ä–∞—Ü—é–≤–∞–≤.

–©–æ –∑–∞–ø–∞–º‚Äô—è—Ç–∞—Ç–∏ –Ω–∞ –º–∞–π–±—É—Ç–Ω—î (–∫–æ—Ä–æ—Ç–∫–∏–π –∞–ª–≥–æ—Ä–∏—Ç–º):

–î–æ—á–µ–∫–∞—Ç–∏—Å—è –ø–æ–≤–Ω–æ–≥–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è DOM —ñ —Å—Ç–∞–±—ñ–ª—ñ–∑–∞—Ü—ñ—ó –µ–ª–µ–º–µ–Ω—Ç—ñ–≤.

–ü–µ—Ä–µ–¥ –ø–æ—à—É–∫–æ–º ‚Äî –≤—ñ–¥–≤–µ—Å—Ç–∏ –∫—É—Ä—Å–æ—Ä —É —Å—Ç–æ—Ä–æ–Ω—É —ñ –Ω–∞—Ç–∏—Å–Ω—É—Ç–∏ Esc, —â–æ–± –∑–∞–∫—Ä–∏—Ç–∏ –ø–æ–ø-–∞–ø–∏.

–®—É–∫–∞—Ç–∏ –∫–Ω–æ–ø–∫—É –Ω–µ –∑–∞ —Ç–µ–∫—Å—Ç–æ–º, –∞ –∑–∞ –æ–∑–Ω–∞–∫–∞–º–∏ –º–µ–Ω—é:
//*[@role='button' and (@aria-haspopup='menu' or @aria-expanded)]

–ü—Ä–æ–∫—Ä—É—Ç–∏—Ç–∏ –µ–ª–µ–º–µ–Ω—Ç —É —Ü–µ–Ω—Ç—Ä –µ–∫—Ä–∞–Ω—É —Ç–∞ –Ω–∞–≤–µ—Å—Ç–∏ –∫—É—Ä—Å–æ—Ä –ø–µ—Ä–µ–¥ –∫–ª—ñ–∫–æ–º.

–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ Selenium-click —è–∫ –æ—Å–Ω–æ–≤–Ω–∏–π –º–µ—Ç–æ–¥.

–¶–µ–π –ø—ñ–¥—Ö—ñ–¥ –Ω–∞–π–º–µ–Ω—à –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ UI-–∑–º—ñ–Ω, –º–æ–≤–∏, —Ä–æ–∑–º—ñ—â–µ–Ω–Ω—è –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ —ñ A/B-—Ç–µ—Å—Ç—ñ–≤ Facebook.

–ó–≤—ñ—Ç: –ü—Ä–æ–±–ª–µ–º–∞ –∑ –≤–∏–±–æ—Ä–æ–º –ø—É–Ω–∫—Ç—É ‚Äú–ù–∞–π–Ω–æ–≤—ñ—à—ñ‚Äù —É –º–µ–Ω—é —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ–≤ Facebook

–ü—Ä–æ–±–ª–µ–º–∞:
–ü—Ä–∏ –≤–∏–±–æ—Ä—ñ –ø—É–Ω–∫—Ç—É "–ù–∞–π–Ω–æ–≤—ñ—à—ñ / Most recent / Newest" —Å–∫—Ä–∏–ø—Ç –∫–ª—ñ–∫–∞–≤ —É –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ñ –º—ñ—Å—Ü—è –∞–±–æ –Ω–µ –∑–Ω–∞—Ö–æ–¥–∏–≤ –ø–æ—Ç—Ä—ñ–±–Ω–∏–π –µ–ª–µ–º–µ–Ω—Ç. –ß–∞—Å—Ç–æ –æ–±–∏—Ä–∞–≤—Å—è –Ω–µ–≤—ñ—Ä–Ω–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –º–µ–Ω—é –∞–±–æ –ø—É–Ω–∫—Ç –Ω–µ –≤–∏–∑–Ω–∞—á–∞–≤—Å—è —á–µ—Ä–µ–∑ –æ—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ DOM.

–ü—Ä–∏—á–∏–Ω–∏ –∑–±–æ—é:

–ü–æ—à—É–∫ –∫–Ω–æ–ø–∫–∏ —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è –ø–æ —Ç–µ–∫—Å—Ç—É ‚Äî —É Facebook —Ç–µ–∫—Å—Ç –º–æ–∂–µ –±—É—Ç–∏ –≤—ñ–¥—Å—É—Ç–Ω—ñ–º, –∑–º—ñ–Ω–µ–Ω–∏–º –∞–±–æ –ª–æ–∫–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–º.

–ú–µ–Ω—é —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î—Ç—å—Å—è –≤ –æ–∫—Ä–µ–º–æ–º—É overlay-—à–∞—Ä—ñ, –∞ –Ω–µ –ø–æ—Ä—É—á —ñ–∑ –∫–Ω–æ–ø–∫–æ—é –≤ DOM.

normalize-space(text()) –Ω–µ —Å–ø—Ä–∞—Ü—å–æ–≤—É—î, –æ—Å–∫—ñ–ª—å–∫–∏ —Ç–µ–∫—Å—Ç –ø—É–Ω–∫—Ç—ñ–≤ –º–µ–Ω—é —á–∞—Å—Ç–æ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤–∞–Ω–∏–π –Ω–∞ –∫—ñ–ª—å–∫–∞ –≤—É–∑–ª—ñ–≤.

–í–∏—Ä—ñ—à–µ–Ω–Ω—è:

–í–∏–∑–Ω–∞—á–∞—Ç–∏ –∫–Ω–æ–ø–∫—É —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è —á–µ—Ä–µ–∑ aria-–∞—Ç—Ä–∏–±—É—Ç–∏ (role='button' + aria-haspopup='menu').

–ß–µ–∫–∞—Ç–∏ –ø–æ—è–≤—É —Å–∞–º–µ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ overlay-–º–µ–Ω—é (–≤–∏–¥–∏–º–µ, –∑ –Ω–∞–π–±—ñ–ª—å—à–∏–º z-index).

–®—É–∫–∞—Ç–∏ –ø—É–Ω–∫—Ç ‚Äú–ù–∞–π–Ω–æ–≤—ñ—à—ñ / Most recent / Newest‚Äù —á–µ—Ä–µ–∑ innerText –∑ –Ω–µ—á—É—Ç–ª–∏–≤—ñ—Å—Ç—é –¥–æ —Ä–µ–≥—ñ—Å—Ç—Ä—É, —â–æ–± –≤—Ä–∞—Ö—É–≤–∞—Ç–∏ —Ä—ñ–∑–Ω—ñ –ª–æ–∫–∞–ª—ñ–∑–∞—Ü—ñ—ó —Ç–∞ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü—ñ—é —Ç–µ–∫—Å—Ç—É.

–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ JS-–∫–ª—ñ–∫ —è–∫ —Ä–µ–∑–µ—Ä–≤, —è–∫—â–æ Selenium-–∫–ª—ñ–∫ –±–ª–æ–∫—É—î—Ç—å—Å—è.

