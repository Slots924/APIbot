# src/main.py
"""Точка входу, яка демонструє пряме використання класу :class:`Bot`."""

# Імпортуємо головний клас бота, який інкапсулює усю взаємодію з AdsPower.
from src.core.bot import Bot


if __name__ == "__main__":
    # Посилання на пост Facebook, з яким будемо взаємодіяти.
    url = "https://www.facebook.com/photo/?fbid=1357982199025492&set=a.363229598500762"

    # Коментар, який потрібно залишити під публікацією.
    comment = "I love this is looks amathing))"

    # Ідентифікатор профілю в AdsPower, що відповідає потрібному браузеру.
    user_id = 214

    # Створюємо екземпляр бота. Усі подальші дії проводитимемо через нього.
    bot = Bot(user_id=user_id)

    try:
        # 1. Запускаємо профіль AdsPower, щоб отримати доступ до браузера.
        bot.start()

        # 2. Закриваємо зайві вкладки, що могли залишитися з попередніх сесій.
        bot.close_tab()
        bot.close_tab()
        bot.close_tab()

        # 3. Відкриваємо потрібний пост, ставимо реакцію та залишаємо коментар.
        bot.open_new_tab(url)
        bot.like_post()
        bot.comment_post(comment)

        # 4. Після виконання сценарію закриваємо вкладку, щоб не залишати сліди.
        bot.close_tab()

    except Exception as exc:
        # Фіксуємо можливу помилку, але гарантуємо завершення сесії у блоці finally.
        print(f"[Помилка для user_id {user_id}]: {exc}")

    finally:
        # 5. Завершуємо роботу профілю, навіть якщо сталася помилка.
        bot.stop()
